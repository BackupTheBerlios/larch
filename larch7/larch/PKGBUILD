# Maintainer: Michael Towers <larch42 (at) googlemail (dot) com>
# 2009.12.08
pkgname=larch
pkgver=7.0.103
pkgrel=1

pkgdesc="Design your own 'live' Archlinux CDs and USB-sticks (etc.)"
url="http://larch.berlios.de"
depends=(uipi python-pexpect)
arch=(any)
license=('GPL')
install=larch.install

build() {
  _destdir=opt/apps/larch
  cd ${pkgdir}
  mkdir -p usr/bin
  mkdir -p usr/share/{pixmaps,applications}
  mkdir -p ${_destdir}

  rm -f ${startdir}/modules/*.pyc
  for d in buildscripts cd-root data docs i18n images modules profiles scripts; do
    cp -dr ${startdir}/${d} ${_destdir}
  done

  cp ${startdir}/larch.py ${_destdir}
  ln -s /${_destdir}/larch.py ${pkgdir}/usr/bin/larch

  mkdir -p ${pkgdir}/usr/share/pixmaps
  ln -s /${_destdir}/images/larch.png ${pkgdir}/usr/share/pixmaps/larch.png
  mkdir -p ${pkgdir}/usr/share/applications
  cp ${startdir}/larch.desktop ${pkgdir}/usr/share/applications
}
